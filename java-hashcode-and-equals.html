<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html dir='ltr' xmlns='http://www.w3.org/1999/xhtml' xmlns:b='http://www.google.com/2005/gml/b' xmlns:data='http://www.google.com/2005/gml/data' xmlns:expr='http://www.google.com/2005/gml/expr' xmlns:g='http://www.google.com/2005/gml/g'><head><title>Hashcode and Equals in Java</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
<link rel="canonical" href="https://java-questions.com/java-hashcode-and-equals.html"/>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="keywords" content="hashcode and equals in java, java hashcode and equals"/>
<meta name="description" content="Object class provides two methods hashcode() and equals() to represent the identity of an object."/>
<link rel="stylesheet" href="css/bootstrap.min.css"/>
<link href="css/prism.css" rel="stylesheet"/>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js" async defer></script>
<script type="text/javascript" src="js/prism.js" async="async"></script></head>
<body><nav class="navbar navbar-inverse">
<div class="container-fluid"><div class="navbar-header">
<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
<span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span></button>
<a class="navbar-brand" href="/">Java Interview questions</a></div>
<div id="navbar" class="navbar-collapse collapse">
<ul class="nav navbar-nav"><li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown">Core Java Interview<span class="caret"></span></a>
<ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu">
<li><a href="keywords-in-java.html"><b> Java Keywords</b></a></li>
<li><a href="keyConcepts-interview-questions.html"><b>Key Concepts</b></a></li>
<li><a href="keyConcepts-interview-questions-1.html"><b>Key Concepts #2</b></a></li>
<li><a href="oops-interview-questions.html"><b>OOPS in java</b></a></li>
<li><a href="collections-interview-questions.html"><b>Java Collections#1</b></a></li>
<li><a href="collections-interview-questions_1.html"><b>Java Collections #2</b></a></li>
<li><a href="Exceptions-interview-questions.html"><b>Exceptions #1</b></a></li>
<li><a href="Exceptions-interview-questions_1.html"><b>Exceptions #2</b></a></li>
<li><a href="Threads-interview-questions.html"><b>Threads#1</b></a></li>
<li><a href="Threads-interview1-questions.html"><b>Threads#2</b></a></li>
<li><a href="InnerClass-interview-questions.html"><b>InnerClass</b></a></li><li><a href="java-more-innerclass-interview-questions.html"><b>More InnerClass</b></a></li>
<li><a href="Serialization-interview-questions.html"><b>Serialization</b></a></li>
<li><a href="ImmutableClass-interview-questions.html"><b>Immutable Class</b></a></li>
<li><a href="Cloning-interview-questions.html"><b>Cloning in Java</b></a></li>
<li><a href="garbagecollection-interview-questions.html"><b>Garbage Collection</b></a></li>   
</ul></li></ul>
<ul class="nav navbar-nav">         
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown">Jsp Interview <span class="caret"></span></a>
<ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu">
<li><a href="jsp-interview-questions.html"><b>JSP #1</b></a></li>
<li><a href="more-jsp-interview-questions.html"><b>JSP #2</b></a></li>  
</ul></li></ul>
<ul class="nav navbar-nav">         
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown">Programming Interview <span class="caret"></span></a>
<ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu">
<li><a href="java-programming-questions-1.html"><b>Programming Q#1</b></a></li>
<li><a href="java-programming-questions-2.html"><b>Programming Q#2</b></a></li>
<li><a href="java-programming-questions-3.html"><b>Programming Q#3</b></a></li> 
</ul></li>
<li><a href="data-structures-in-details.html">Data Structures</a></li>
<li><a href="java-articles.html">Java-Articles</a></li><li><a href="java-books.html">Books</a></li> 
</ul></div><!--/.nav-collapse --></div><!--/.container-fluid --></nav>
<div class="container-fluid main">
<div class="row">
<div class="col-sm-3 col-md-2 sidebar">
<ul class="nav nav-sidebar">
<li><a href="keywords-in-java.html"><b> Java Keywords</b></a></li>
<li><a href="keyConcepts-interview-questions.html"><b>Key Concepts</b></a></li>
<li><a href="keyConcepts-interview-questions-1.html"><b>Key Concepts #2</b></a></li>
<li><a href="oops-interview-questions.html"><b>OOPS in java</b></a></li>
<li><a href="collections-interview-questions.html"><b>Java Collections#1</b></a></li>
<li><a href="collections-interview-questions_1.html"><b>Java Collections #2</b></a></li>
<li><a href="Exceptions-interview-questions.html"><b>Exceptions #1</b></a></li>
<li><a href="Exceptions-interview-questions_1.html"><b>Exceptions #2</b></a></li>
<li><a href="Threads-interview-questions.html"><b>Threads#1</b></a></li>
<li><a href="Threads-interview1-questions.html"><b>Threads#2</b></a></li>
<li><a href="InnerClass-interview-questions.html"><b>InnerClass</b></a></li>
<li><a href="java-more-innerclass-interview-questions.html"><b>More InnerClass</b></a></li>
<li><a href="Serialization-interview-questions.html"><b>Serialization</b></a></li>
<li><a href="ImmutableClass-interview-questions.html"><b>Immutable Class</b></a></li>
<li><a href="Cloning-interview-questions.html"><b>Cloning in Java</b></a></li>
<li><a href="garbagecollection-interview-questions.html"><b>Garbage Collection</b></a></li>
<li><a href="jsp-interview-questions.html"><b>JSP #1</b></a></li>
<li><a href="more-jsp-interview-questions.html"><b>JSP #2</b></a></li>
<li><a href="java-programming-questions-1.html"><b>Programming Q#1</b></a></li>
<li><a href="java-programming-questions-2.html"><b>Programming Q#2</b></a></li>
<li><a href="java-programming-questions-3.html"><b>Programming Q#3</b></a></li>
</ul></div>
<div class="col-sm-6 col-md-6">
<h1>Use of java hashCode and equals.</h1>
<div><p>Object class provides two methods <code>hashcode()</code> and <code>equals()</code> to represent the identity of an object. It is a common convention that if one method is overridden then other should also be implemented.</p>
<p> Before explaining why lets see what is the contract between these two methods holds. As per the Java API documentation:</p>
<ul><li> When <code>hashcode()</code> is invoked on the same object more than once during an execution of a Java application, the <code>hashcode()</code> method must consistently return the same integer, provided no information used in <code>equals()</code> comparisons on the object is modified. This integer need not remain consistent from one execution of an application to another execution of the same application.</li>
<li> If two objects are equal according to the equals(object) method, then calling the <code>hashCode()</code> method on each of the two objects must produce the same integer result.</li>
<li> It is NOT required that if two objects are unequal according to the equals(Java.lang.Object) method, then calling the <code>hashCode()</code> method on each of the two objects must produce distinct integer results. However, the programmer should be aware that producing distinct integer results for unequal objects may improve the performance of hashtables.</li></ul>
<div><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- new-middle -->
<ins class="adsbygoogle"
style="display:inline-block;width:300px;height:250px"
data-ad-client="ca-pub-4267874373737812"
data-ad-slot="6388864415"></ins>
<script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
</div> 
<p>Now, consider an example where the key used to store in the Hashmap is an Integer. Consider that <code>Integer</code> class doesn't implement hashcode() method. The code would look like:</p>
<pre><code class="language-java">map.put(new Integer(5),"Value1");
String value = (String) map.get(new Integer(5));
System.out.println(value);
//Output : Value is null</code></pre>
<p>Null value will be displayed since the hashcode() method returns a different hash value for the Integer object created at line 2 and JVM tries to search for the object at different location.</p>
<p>Now if the <code>Integer</code> class has <code>hashcode()</code> method like:</p>
<pre><code class="language-java">public int hashCode() {
  return value;
}</code></pre>
<p>Every time a new Integer object is created with same integer value passed; the Integer object will return the same hash value. Once the same hash value is returned, JVM will go to the same hashmap bucket every time and if in case there are more than one objects present for the same hash value it will use equals() method to identify the correct object.</p>
<p>Another step of caution that needs to be taken is that while implementing the hashcode() method the fields that are present in the hashcode() should not be the one which could change the state of the object.</p>
<p>Consider the example:</p>
<pre><code class="language-java">public class FourWheeler implements Vehicle {

  private String name;
  private int purchaseValue;
  private int noOfTyres;
  public FourWheeler(){}

  public FourWheeler(String name, int purchaseValue) {
        this.name = name;
        this.purchaseValue = purchaseValue;
  }
  public void setPurchaseValue(int purchaseValue) {
        this.purchaseValue = purchaseValue;
  }

  @Override
  public int hashCode() {
        final int prime = 31;
        int result = 1;
        result = prime * result + ((name == null) ? 0 : name.hashCode());
        result = prime * result + purchaseValue;
        return result;
  }
  //imagine equals() method is present. Will show how to implement 
  //later in article
}

//Try running this snippet
FourWheeler fourWObj = new FourWheeler("Santro","333333);
map.put(fourWObj,"Hyundai);
fourWObj.setPurchaseValue("555555)
System.out.println(map.get(fourWObj));
//Output: null</code></pre>
<div>
<p><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
   style="display:inline-block;width:728px;height:90px"
   data-ad-client="ca-pub-4267874373737812"
   data-ad-slot="4603760017"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></p>
</div>     
<p>We can see that inspite of passing the same object the value returned is null. This is because the hashcode() returns a different value since the purchaseValue is set to 555555 from 333333.</p>
<p>Though the above implementation is correct but it fails because for generating hashcode a changeable property (in this case price) is selected. To make above implementation correct it is recommended to has fields in hashcode which doesn't change.</p>
<p>One compatible, but not all that useful, way to define hashCode() is like this:</p>
<pre><code class="language-java">public int hashcode(){
  return 0;
}</code></pre>
<p>Although this approach is correct but it will yield bad performance for the HashMap. The conclusion which can be made is that the hashcode() should(not must) return the same value if the objects are equal. If the objects are not equal then it must return different value.</p>
<pre><code class="language-java">public class StringHelper {
  private String inputString;

  public StringHelper(String string) {
    inputString=string;
  }
  @Override
  public int hashCode() {
    return inputString.length();
  }
  public static void main(String[] args) {
    StringHelper helperObj = new StringHelper("string");
    StringHelper helperObj1 = new StringHelper("string");
    if(helperObj.hashCode() == helperObj1.hashCode()){
      System.out.println("HashCode are equal");
    }
    if(helperObj.equals(helperObj1)){
      System.out.println("Objects are equal");
    }else{
      System.out.println("Objects are not equal");
    }
  }
  public String getInputString() {
    return inputString;
  }
  // imagine equals() method is implemented. Will show how to implement 
  // later in article
}
// Output:
HashCode are equal
Objects are not equal</code></pre>
<p>We can see that even though the StringHelper object contains the same value the equals method has returned false but the hashcode method has return true value.</p>
<p>To prevent this inconsistency, we should make sure that we override <code>equals()</code> method too such that the contract between both methods doesn't fail.</p>
<h2> How to implement equals() method</h2>
<p><strong>Steps that need to be taken into consideration while implementing equals method.</strong></p>
<ul><li><strong>Use the == operator to check if the argument is a reference to this object. </strong>If so, return true. This is just a performance optimization, but one that is worth doing if the comparison is potentially expensive.</li>
<li><strong>Use the instanceof operator to check if the argument has the correct type</strong>.</li>
<li>If not, return false. Typically, the correct type is the class in which the method occurs. Occasionally, it is some interface implemented by this class. Use an interface if the class implements an interface that refines the equals contract to permit comparisons across classes that implement the interface. Collection interfaces such as Set, List, Map, and Map.Entry have this property.</li>
<li><strong>Cast the argument to the correct type. Because this cast was preceded by an instanceof test, it is guaranteed to succeed.</strong></li>
<li><strong>For each significant field in the class, checks if that field of the argument matches the corresponding field of this object</strong>.If all these tests succeed, return true; otherwise, return false</li>
<li><strong>When you are finished writing your equals method, ask yourself three questions: Is it symmetric? Is it transitive? Is it consistent?</strong></li>
<p>The correct implementation of equals method for the StringHelper class could be:</p>
<pre><code class="language-java">
public class StringHelper {
  private String inputString;
  
  public StringHelper(String string) {
    inputString = string;
  }

  @Override
  public int hashCode() {
    return inputString.length();
  }

  @Override
  public boolean equals(Object obj) {
    if (this == obj)
      return true;
    if (obj == null)
      return false;
    if (getClass() != obj.getClass())
      return false;
    final StringHelper other = (StringHelper) obj;
    if (inputString == null && other.inputString != null) {
      return false;
    } else if (!inputString.equals(other.inputString))
      return false;
    return true;
  }

  public static void main(String[] args) {
    StringHelper helperObj = new StringHelper("string");
    StringHelper helperObj1 = new StringHelper("string");
    if(helperObj.hashCode() == helperObj1.hashCode()){
      System.out.println("HashCode are equal");
    }
    if(helperObj.equals(helperObj1)){
      System.out.println("Objects are equal");
    }else{
      System.out.println("Objects are not equal");
    }
  }
  public String getInputString() {
    return inputString;
  }
}
// Output:
HashCode are equal
Objects are equal
</code></pre>                    
</div>
<div id="disqus_thread"></div>
<script type="text/javascript">
var disqus_shortname = 'java-questions';
(function() {
var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
</div> <!-- dashboard -->
<div class="col-sm-3 col-md-4">
<div class="fb-like-box" data-href="https://www.facebook.com/InterviewQuestionsForProgrammers" data-colorscheme="light" data-show-faces="true" data-header="true" data-stream="false" data-show-border="true"></div>
<div style="margin: 5px; float: center;">  
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- new-righttop1 -->
<ins class="adsbygoogle"
style="display:inline-block;width:300px;height:600px"
data-ad-client="ca-pub-4267874373737812"
data-ad-slot="3435398011"></ins>
<script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
</div>
<div><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- new-righttop2 -->
<ins class="adsbygoogle"
style="display:inline-block;width:300px;height:600px"
data-ad-client="ca-pub-4267874373737812"
data-ad-slot="4912131216"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div>  </div></div><script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-23729980-1', 'auto');
ga('send', 'pageview');
</script><footer style="background-color: #3c3d41;padding: 30px 30px;color: rgba(255,255,255,1.00);margin-bottom: 20px;border-bottom-right-radius: 6px;border-top-left-radius: 0px;border-bottom-left-radius: 6px;">
<div class="row"><h4>Recommend Reading</h4><div class="col-md-6">
<ul class="pages"><li><a href="java-memory-model-and-garbage-clilections.html">How java manages Memory?</a></li><li><a href="java-hashcode-and-equals.html">Why is it advised to use hashcode and equals together?</a></li><li><a href="java-comparable-comparator.html">Comparable and Comparator in java</a></li><li><a href="java-singleton-class.html">How to create Singleton class in Java?</a></li>
<li><a href="java-8-lambda-expressions.html">Lambdas in Java8</a></li><li><a href="java-concurrenthashmap.html">How Concurrent HashMap Works?</a></li><li><a href="difference-between-final-finally-and-finalize.html">Difference between final, finally and finalize</a></li><li><a href="log-structured-merge-trees.html">Log Structured Merge Trees</a></li></ul><p>Copyright 2018 JavaQuestions, All rights reserved | <a href="sitemap.xml">Sitemap</a></p>
</div><div class="col-md-5 animated fadeInRight"><h3>Subscribe to get latest updates.</h3><form action="//java-questions.us5.list-manage.com/subscribe/post?u=eef8f08d0222ba841685ce4e2&amp;id=3670638f6d" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate><div id="mc_embed_signup_scroll"><div class="mc-field-group"><label for="mce-EMAIL">Email Address <span class="asterisk">*</span></label><input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL" style="color: rgba(0,0,0, 1.0);"></div><div class="clear"><button type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="btn btn-success"/>Subscribe</div></div></form></div></p></div></div></footer></body></html>