<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html dir='ltr' xmlns='http://www.w3.org/1999/xhtml' xmlns:b='http://www.google.com/2005/gml/b' xmlns:data='http://www.google.com/2005/gml/data' xmlns:expr='http://www.google.com/2005/gml/expr' xmlns:g='http://www.google.com/2005/gml/g'><head><title>Word Break 2 problem</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="check balance binary tree"/>
<link rel="canonical" href="http://java-questions.com/word-break.html"/>
<meta name="keywords"  content="balanced,binary tree" />
<link rel="stylesheet" href="css/bootstrap.min.css"/>
<link href="css/prism.css" rel="stylesheet"/><script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js" async defer></script>
<script type="text/javascript" src="js/prism.js" async="async"></script></head><body><nav class="navbar navbar-inverse">
<div class="container-fluid"><div class="navbar-header">
<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
<span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
`<span class="icon-bar"></span>
<span class="icon-bar"></span></button>
<a class="navbar-brand" href="/">Java Interview questions</a></div>
<div id="navbar" class="navbar-collapse collapse">
<ul class="nav navbar-nav"><li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown">Core Java Interview<span class="caret"></span></a>
<ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu">
<li><a href="keywords-in-java.html"><b> Java Keywords</b></a></li>
<li><a href="keyConcepts-interview-questions.html"><b>Key Concepts</b></a></li>
<li><a href="keyConcepts-interview-questions-1.html"><b>Key Concepts #2</b></a></li>
<li><a href="oops-interview-questions.html"><b>OOPS in java</b></a></li>
<li><a href="collections-interview-questions.html"><b>Java Collections#1</b></a></li>
<li><a href="collections-interview-questions_1.html"><b>Java Collections #2</b></a></li>
<li><a href="Exceptions-interview-questions.html"><b>Exceptions #1</b></a></li>
<li><a href="Exceptions-interview-questions_1.html"><b>Exceptions #2</b></a></li>
<li><a href="Threads-interview-questions.html"><b>Threads#1</b></a></li>
<li><a href="Threads-interview1-questions.html"><b>Threads#2</b></a></li>
<li><a href="InnerClass-interview-questions.html"><b>InnerClass</b></a></li><li><a href="java-more-innerclass-interview-questions.html"><b>More InnerClass</b></a></li>
<li><a href="Serialization-interview-questions.html"><b>Serialization</b></a></li>
<li><a href="ImmutableClass-interview-questions.html"><b>Immutable Class</b></a></li>
<li><a href="Cloning-interview-questions.html"><b>Cloning in Java</b></a></li>
<li><a href="garbagecollection-interview-questions.html"><b>Garbage Collection</b></a></li>   
</ul></li></ul>
<ul class="nav navbar-nav">         
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown">Jsp Interview <span class="caret"></span></a>
<ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu">
<li><a href="jsp-interview-questions.html"><b>JSP #1</b></a></li>
<li><a href="more-jsp-interview-questions.html"><b>JSP #2</b></a></li>  
</ul></li></ul>
<ul class="nav navbar-nav">         
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown">Programming Interview <span class="caret"></span></a>
<ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu">
<li><a href="java-programming-questions-1.html"><b>Programming Q#1</b></a></li>
<li><a href="java-programming-questions-2.html"><b>Programming Q#2</b></a></li>
<li><a href="java-programming-questions-3.html"><b>Programming Q#3</b></a></li> 
</ul></li>
<li><a href="data-structures-in-details.html">Data Structures</a></li>
<li><a href="java-articles.html">Java-Articles</a></li>
<li><a href="java-books.html">Books</a></li>
</ul></div></div></nav>
<div class="container-fluid main">
<div class="row">
<div class="col-sm-3 col-md-2 sidebar">
<ul class="nav nav-sidebar">
<li><a href="keywords-in-java.html"><b> Java Keywords</b></a></li>
<li><a href="keyConcepts-interview-questions.html"><b>Key Concepts</b></a></li>
<li><a href="keyConcepts-interview-questions-1.html"><b>Key Concepts #2</b></a></li>
<li><a href="oops-interview-questions.html"><b>OOPS in java</b></a></li>
<li><a href="collections-interview-questions.html"><b>Java Collections#1</b></a></li>
<li><a href="collections-interview-questions_1.html"><b>Java Collections #2</b></a></li>
<li><a href="Exceptions-interview-questions.html"><b>Exceptions #1</b></a></li>
<li><a href="Exceptions-interview-questions_1.html"><b>Exceptions #2</b></a></li>
<li><a href="Threads-interview-questions.html"><b>Threads#1</b></a></li>
<li><a href="Threads-interview1-questions.html"><b>Threads#2</b></a></li>
<li><a href="InnerClass-interview-questions.html"><b>InnerClass</b></a></li>
<li><a href="java-more-innerclass-interview-questions.html"><b>More InnerClass</b></a></li>
<li><a href="Serialization-interview-questions.html"><b>Serialization</b></a></li>
<li><a href="ImmutableClass-interview-questions.html"><b>Immutable Class</b></a></li>
<li><a href="Cloning-interview-questions.html"><b>Cloning in Java</b></a></li>
<li><a href="garbagecollection-interview-questions.html"><b>Garbage Collection</b></a></li>
<li><a href="jsp-interview-questions.html"><b>JSP #1</b></a></li>
<li><a href="more-jsp-interview-questions.html"><b>JSP #2</b></a></li>
<li><a href="java-programming-questions-1.html"><b>Programming Q#1</b></a></li>
<li><a href="java-programming-questions-2.html"><b>Programming Q#2</b></a></li>
<li><a href="java-programming-questions-3.html"><b>Programming Q#3</b></a></li>
</ul></div>
<div class="col-sm-6 col-md-6">
<h1>Word Break II Problem</h1>
<p><i>Leetcode: Given a non-empty string s and a dictionary wordDict containing a list of non-empty words, add spaces in s to construct a sentence where each word is a valid dictionary word. You may assume the dictionary does not contain duplicate words.</i></p>
<p>Return all such possible sentences.</p>
<p>For example, given</p>
<p><code>s = "catsanddog"</code></p>
<p><code>dict = ["cat", "cats", "and", "sand", "dog"].</code></p>
<p><code>A solution is ["cats and dog", "cat sand dog"]</code></p>
<div><p>The problem can be solved using Backtracking and memoization.</p>
<img src="/img/wordbreak.png"/>
<ol><li>Start traversing the string from index 0. At index 0 , substring 'c' is not in dict.</li>
<li>Substring <code>ca</code> is not in dict</li>
<li>Substring <code>cat</code> is in dict. Now there is two possibility as it can be seen in the diagram. consider <code>cat</code> as part of answer and traverse forward with substring <code>sanddog</code> and ignore <code>cat</code> and look for next substring which is <code>cats</code>.</li>
<li>Follow above steps till the end of the string. If by the end of string, it can be split into multiple words then add it to the answer list</li>
<li>To optimize and prevent traversing same path multiple times using <code>memoization</code></li></ol>
<div><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-4267874373737812" data-ad-slot="7600236816"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div>
<pre><code class="language-java">public class WordsBreak2 {

  public static void main(String[] args) {
    List<String> dict = new ArrayList();
    dict.add("cat");
    dict.add("cats");
    dict.add("and");
    dict.add("sand");
    dict.add("dogs");
    System.out.println(new WordsBreak2().wordBreak("catsanddogs", dict));
  }

  public List<String> wordBreak(String s, List<String> wordDict) {
    if (s == null || s.isEmpty())
      return Collections.EMPTY_LIST;
    return wordBreak1(s, wordDict, new HashMap());
  }

  private List<String> wordBreak1(String s, List<String> wordDict, Map<String, List<String>> map) {
    if (map.containsKey(s)) {
      return map.get(s);
    }
    List<String> res = new ArrayList();
    System.out.println(s);
    for (int i = 1; i <= s.length(); i++) {
      // check if substring is present in dict.
      if (wordDict.contains(s.substring(0, i))) {
        if (s.substring(i).length() > 0) {
          // work with rest of the substring
          List<String> r = wordBreak1(s.substring(i), wordDict);
          String w = s.substring(0, i);
          if (!r.isEmpty()) {
            for (String a : r) {
              res.add(w + " " + a);
            }
          }
        } else {
          res.add(s.substring(0, i));
        }
      }
    }
    map.put(s, res);
    return res;
  }

} </pre></code>

<div><p>This is one approach but if you run this code in Leetcode you will get <code>Time Limit Exceed error</code>. For e.g.<code>["a","aa","aaa","aaaa","aaaaa","aaaaaa","aaaaaaa","aaaaaaaa","aaaaaaaaa","aaaaaaaaaa"]</code></p>
<p><code>String s = "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaab
aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"</code></p>
<p>Further optimization can be done by identifying the longest word in the dict and restricting the <code>substring</code> length not max of dict.</p>
<pre><code class="language-java"> public List<String> wordBreak(String s, List<String> wordDict) {
    if (s == null || s.isEmpty() || wordDict.size() == 0)
      return Collections.EMPTY_LIST;
    int length = getMaxLength(wordDict);
    return wordBreak1(s, wordDict, new HashMap(), length);
  }

  //find max length of word in dict
  private int getMaxLength(List<String> wordDict) {
    return wordDict.stream().max((o1, o2) -> 
      Integer.compare(o1.length(), o2.length())).get().length();
  }

  private List<String> wordBreak1(String s, List<String> wordDict, Map<String, List<String>> map, int maxLength) {
    if (map.containsKey(s)) {
      return map.get(s);
    }
    List<String> res = new ArrayList();
    // restrict for loop with maxLength
    for (int i = 1; i <= maxLength && i <= s.length(); i++) {
      // check if substring is present in dict.
      if (wordDict.contains(s.substring(0, i))) {
        if (s.substring(i).length() > 0) {
          // work with rest of the substring
          List<String> r = wordBreak1(s.substring(i), wordDict, map, maxLength);
          String w = s.substring(0, i);
          if (!r.isEmpty()) {
            for (String a : r) {
              res.add(w + " " + a);
            }
          }
        } else {
          res.add(s.substring(0, i));
        }
      }
    }
    map.put(s, res);
    return res;
  }</code></pre>
<p>Another approach is to iterate over the dict and see if a word is present. The approach is very similar to above one, but here traversal of dict is done which is faster.</div>
<pre><code class="language-java">public class Solution {
    public List<String> wordBreak(String s, List<String> wordDict) {
    if (s == null || s.isEmpty())
      return Collections.EMPTY_LIST;
    return wordBreak1(s, wordDict, new HashMap());
  }

  private List<String> wordBreak1(String s, List<String> wordDict, Map<String, List<String>> map) {
    if (map.containsKey(s)) {
      return map.get(s);
    }
    List<String> res = new ArrayList();
    for (int i = 1; i <= s.length(); i++) {
      // System.out.println(s.substring(0, i));
      if (wordDict.contains(s.substring(0, i))) {
        if (s.substring(i).length() > 0) {
          List<String> r = wordBreak(s.substring(i), wordDict);
          String w = s.substring(0, i);
          if (!r.isEmpty()) {
            for (String a : r) {
              res.add(w + " " + a);
            }
          }
        } else {
          res.add(s.substring(0, i));
        }
      }
    }
    map.put(s, res);
    return res;
  }

}</code></pre>
</div>
<div id="disqus_thread"></div>
<script type="text/javascript">
var disqus_shortname = 'java-questions';
(function() {
var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
</div> <!-- dashboard -->
<div class="col-sm-3 col-md-4">
<div class="fb-like-box" data-href="https://www.facebook.com/InterviewQuestionsForProgrammers" data-colorscheme="light" data-show-faces="true" data-header="true" data-stream="false" data-show-border="true"></div>
<div style="margin: 5px; float: center;">  
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- new-righttop1 -->
<ins class="adsbygoogle"
style="display:inline-block;width:300px;height:600px"
data-ad-client="ca-pub-4267874373737812"
data-ad-slot="3435398011"></ins>
<script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
</div>
<div><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- new-righttop2 -->
<ins class="adsbygoogle"
style="display:inline-block;width:300px;height:600px"
data-ad-client="ca-pub-4267874373737812"
data-ad-slot="4912131216"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div>  </div></div><script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-23729980-1', 'auto');
ga('send', 'pageview');
</script>
<footer style="background-color: #3c3d41;padding: 30px 30px;color: rgba(255,255,255,1.00);margin-bottom: 20px;border-bottom-right-radius: 6px;border-top-left-radius: 0px;border-bottom-left-radius: 6px;">
<div class="row">
<h4>Recommend Reading</h4>
<div class="col-md-6">
<ul class="pages">
<li><a href="java-memory-model-and-garbage-clilections.html">How java manages Memory?</a></li>
<li><a href="java-hashcode-and-equals.html">Why is it advised to use hashcode and equals together?</a></li>
<li><a href="java-comparable-comparator.html">Comparable and Comparator in java</a></li>
<li><a href="java-singleton-class.html">How to create Singleton class in Java?</a></li>
<li><a href="difference-between-equals-method-and-equality-operator-java.html">Difference betwen equals and ==?</a></li>
<li><a href="difference-between-abstract-class-and-interface-java.html">When to use abstract class over interface?</a></li>
<li><a href="difference-between-final-finally-and-finalize.html">Difference between final, finally and finalize</a></li>
<li><a href="java-immutable-class.html">Why is it recommended to ues Immutable objects in Java</a></li>
</ul>
<p>Copyright 2018 JavaQuestions, All rights reserved | <a href="sitemap.xml">Sitemap</a></p>
</div>
<div class="col-md-5 animated fadeInRight">
<h3>Subscribe to get latest updates.</h3>
<form action="//java-questions.us5.list-manage.com/subscribe/post?u=eef8f08d0222ba841685ce4e2&amp;id=3670638f6d" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
<div id="mc_embed_signup_scroll">
<div class="mc-field-group">
<label for="mce-EMAIL">Email Address <span class="asterisk">*</span></label>
<input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL" style="color: rgba(0,0,0, 1.0);">
</div>
<div class="clear"><button type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="btn btn-success"/>Subscribe</div></div>
</form></div></p></div></div></footer></body></html>