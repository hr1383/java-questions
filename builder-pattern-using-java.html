<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html dir='ltr' xmlns='http://www.w3.org/1999/xhtml' xmlns:b='http://www.google.com/2005/gml/b' xmlns:data='http://www.google.com/2005/gml/data' xmlns:expr='http://www.google.com/2005/gml/expr' xmlns:g='http://www.google.com/2005/gml/g'><head><title>Java Builder Pattern</title>
<meta name="description" content="Using java builder pattern when faced with many constructors parameters"/> 
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="canonical" href="http://java-questions.com/builder-pattern-using-java.html"/>
<link rel="stylesheet" href="css/bootstrap.min.css"/>
<script src="js/prism.js" async></script>

<link href="css/prism.css" rel="stylesheet"/>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js" async></script>
<script src="js/prism.js" async="async"></script></head><body>
<nav class="navbar navbar-inverse">
<div class="container-fluid">
<div class="navbar-header">
<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
<span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<a class="navbar-brand" href="/">Java Interview questions</a>
</div>
<div id="navbar" class="navbar-collapse collapse">
<ul class="nav navbar-nav">
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown">Core Java Interview<span class="caret"></span></a>
<ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu">
<li><a href="keywords-in-java.html"><b> Java Keywords</b></a></li>
<li><a href="keyConcepts-interview-questions.html"><b>Key Concepts</b></a></li>
<li><a href="keyConcepts-interview-questions-1.html"><b>Key Concepts #2</b></a></li>
<li><a href="oops-interview-questions.html"><b>OOPS in java</b></a></li>
<li><a href="collections-interview-questions.html"><b>Java Collections#1</b></a></li>
<li><a href="collections-interview-questions_1.html"><b>Java Collections #2</b></a></li>
<li><a href="Exceptions-interview-questions.html"><b>Exceptions #1</b></a></li>
<li><a href="Exceptions-interview-questions_1.html"><b>Exceptions #2</b></a></li>
<li><a href="Threads-interview-questions.html"><b>Threads#1</b></a></li>
<li><a href="Threads-interview1-questions.html"><b>Threads#2</b></a></li>
<li><a href="InnerClass-interview-questions.html"><b>InnerClass</b></a></li><li><a href="java-more-innerclass-interview-questions.html"><b>More InnerClass</b></a></li>
<li><a href="Serialization-interview-questions.html"><b>Serialization</b></a></li>
<li><a href="ImmutableClass-interview-questions.html"><b>Immutable Class</b></a></li>
<li><a href="Cloning-interview-questions.html"><b>Cloning in Java</b></a></li>
<li><a href="garbagecollection-interview-questions.html"><b>Garbage Collection</b></a></li>   
</ul></li>
</ul>
<ul class="nav navbar-nav">         
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown">Jsp Interview <span class="caret"></span></a>
<ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu">
<li><a href="jsp-interview-questions.html"><b>JSP #1</b></a></li>
<li><a href="more-jsp-interview-questions.html"><b>JSP #2</b></a></li>  
</ul></li></ul>
<ul class="nav navbar-nav">         
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown">Programming Interview <span class="caret"></span></a>
<ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu">
<li><a href="java-programming-questions-1.html"><b>Programming Q#1</b></a></li>
<li><a href="java-programming-questions-2.html"><b>Programming Q#2</b></a></li>
<li><a href="java-programming-questions-3.html"><b>Programming Q#3</b></a></li> 
</ul></li><li><a href="data-structures-in-details.html">Data Structures</a></li><li><a href="java-articles.html">Java-Articles</a></li><li><a href="java-books.html">Books</a></li></ul>
</div><!--/.nav-collapse -->
</div><!--/.container-fluid -->
</nav>
<div class="container-fluid main">
<div class="row">
<div class="col-sm-3 col-md-2 sidebar hidden-xs hidden-sm hidden-md">
<ul class="nav nav-sidebar">
<li><a href="keywords-in-java.html"><b> Java Keywords</b></a></li>
<li><a href="keyConcepts-interview-questions.html"><b>Key Concepts</b></a></li>
<li><a href="keyConcepts-interview-questions-1.html"><b>Key Concepts #2</b></a></li>
<li><a href="oops-interview-questions.html"><b>OOPS in java</b></a></li>
<li><a href="collections-interview-questions.html"><b>Java Collections#1</b></a></li>
<li><a href="collections-interview-questions_1.html"><b>Java Collections #2</b></a></li>
<li><a href="Exceptions-interview-questions.html"><b>Exceptions #1</b></a></li>
<li><a href="Exceptions-interview-questions_1.html"><b>Exceptions #2</b></a></li>
<li><a href="Threads-interview-questions.html"><b>Threads#1</b></a></li>
<li><a href="Threads-interview1-questions.html"><b>Threads#2</b></a></li>
<li><a href="InnerClass-interview-questions.html"><b>InnerClass</b></a></li>
<li><a href="java-more-innerclass-interview-questions.html"><b>More InnerClass</b></a></li>
<li><a href="Serialization-interview-questions.html"><b>Serialization</b></a></li>
<li><a href="ImmutableClass-interview-questions.html"><b>Immutable Class</b></a></li>
<li><a href="Cloning-interview-questions.html"><b>Cloning in Java</b></a></li>
<li><a href="garbagecollection-interview-questions.html"><b>Garbage Collection</b></a></li>
<li><a href="jsp-interview-questions.html"><b>JSP #1</b></a></li>
<li><a href="more-jsp-interview-questions.html"><b>JSP #2</b></a></li>
<li><a href="java-programming-questions-1.html"><b>Programming Q#1</b></a></li>
<li><a href="java-programming-questions-2.html"><b>Programming Q#2</b></a></li>
<li><a href="java-programming-questions-3.html"><b>Programming Q#3</b></a></li>
</ul>
</div>
<div class="col-sm-3 col-md-6">
<h2>Best Practices - Using builder pattern when faced with many constructors paramters</h2>

<p>Static factories and constructors share a limitation, they do not scale well for large number of optional parameters.
Consider an example where you have a class representing a Book. It has few required fields such a title, author, publisher, published date and over 10 optional fields. </p>
<p>Traditional approach would be to have:</p>
<ol><li>one constructor with required fields</li>
<li> second constructor with required fields and one optional field</li>
<li> third and so on with required fields and combination of optional fields</li></ol>
<p>This is traditional telescoping constructor pattern. Here is how code looks:</p>
<pre><code class="language-java">public class Book {

	private String title;			 //required
	private String author;			 //required
	private String publisher;		 //required
	private Date publishedDate;		 //required
	private String publishedCountry; //optional
	private String primaryLang;		 //optional

	public Book(String title, String author, String publisher,
			Date publishedDate) {
		this.title = title;
		this.author = author;
		this.publisher = publisher;
		this.publishedDate = publishedDate;
	}
	
	public Book(String title, String author, String publisher,
			Date publishedDate, String publishedCountry,
			String primaryLang, String publishedCountry) {
		this.title = title;
		this.author = author;
		this.publisher = publisher;
		this.publishedDate = publishedDate;
		this.publishedCountry = publishedCountry;
		this.primaryLang = primaryLang;
		this.publishedCountry = publishedCountry;
	}
	
}

// using 1st constructor 
Book book = new Book("Learn java", "james", "TMH", new Date(02/13/2001));
// using 2nd constructor
Book book = new Book("Learn java", "james", "TMH", new Date(02/13/2001), "USA", "EN");
// using 2nd constructor 
Book book = new Book("Learn java", "james", "TMH", new Date(02/13/2001), null, "EN"); 

</code></pre>
<p> To create objects </p>
<p> In the 3rd case you end up passing parameter which is not required. This may not look bad with 6 parameters, but imagine having 10 parameters and passing "" or null for the optional fields. Also passing the parameters in such a fashion is a recipe for introducing bugs in the code. For e.g one could forgot to pass one parameter and the constructor is still present or passing the parameters in wrong order.</p>
<div><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
style="display:inline-block;width:300px;height:250px"
data-ad-client="ca-pub-4267874373737812"
data-ad-slot="6388864415"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div>
<p><i>The second way</i> is the JavaBean patterms, which allows to create a parameterless constructor and then call setters method to set each field. This pattern is bit wordy to create instances but easy to read. Unfortunately the pattern has major disadvantage, a JavaBean may be in an inconsistent state partway through its construction since multiple calls are involved for object creation. The class can not force the validity of the input parmeters via the constuctor. Here is how the code looks like:</p>
<pre><code class="language-java">public class Book {

	private String title;
	private String author;
	private String publisher;
	private Date publishedDate;
	private String publishedCountry;
	private String primaryLang;
	
	public void setTitle(String title) {
		this.title = title;
	}
	public void setAuthor(String author) {
		this.author = author;
	}
	public void setPublisher(String publisher) {
		this.publisher = publisher;
	}
	public void setPublishedDate(Date publishedDate) {
		this.publishedDate = publishedDate;
	}
	public void setPublishedCountry(String publishedCountry) {
		this.publishedCountry = publishedCountry;
	}
	public void setPrimaryLang(String primaryLang) {
		this.primaryLang = primaryLang;
	}

}

Book b = new Book();
b.setAuthor("james gosling");
b.setTitle("Learning java");
b.setPusblisher("TMH");
...
</code></pre>
<br/>
<div>
<p class="pull-left"> There is third way that combines the advantages of the telescopic constructor pattern and readability of the JavaBeans pattern. It is <b><i> Builder Pattern</i></b> The client calls the constructor with all of required parameters and gets a builder object. Then the client calls the setter like method on the builder object to set each optional field. Finally client calls a parameterless build method to generate the object which is immutable. The builder is static member class of the class it builds. Here is how code looks: </p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
style="display:inline-block;width:300px;height:250px"
data-ad-client="ca-pub-4267874373737812"
data-ad-slot="6388864415"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div>
<pre><code class="language-java">public class Book {

	private String title;
	private String author;
	private String publisher;
	private Date publishedDate;
	private String publishedCountry;
	private String primaryLang;
	
	public static class Builder {
		//required
		private String title;
		private String author;
		private String publisher;
		private Date publishedDate;
		
		private String publishedCountry;
		private String primaryLang;
		
		public Builder(String title, String author, String publisher) {
			super();
			this.title = title;
			this.author = author;
			this.publisher = publisher;
			this.publishedDate = publishedDate;
		}
		
		public Builder publishedCountry(String publishedCountry) {
			this.publishedCountry = publishedCountry;
			return this;
		}
		
		public Builder primaryLang(String primaryLang) {
			this.primaryLang = primaryLang;
			return this;
		}
		
		public Book build() {
			return new Book(this);
		}
	}
	
	private Book(Builder builder) {
		this.title = builder.title;
		this.author = builder.author;
		this.primaryLang = builder.primaryLang;
		this.publishedCountry = builder.publishedCountry;
		this.publishedDate = builder.publishedDate;
		this.publisher = builder.publisher;
	}

}

Book book = new Book.Builder("Learn java", "james", "TMH", new Date(02/13/2001)).build();
Book book = new Book.Builder("Learn java", "james", "TMH", new Date(02/13/2001)).primaryLang("EN").build();
</code></pre>
<br/>
<p> As you could see, it becomes easy to create object. </p>
<p> Like a constructor, a builder can impose invariants on its parameters. The build method can check these invariants. It is important to note the validation of parameters is done after copying the parameters from the builder to the object, and checked on the objects fields instead of the builder fields. The builder can fill in some fields automatically, such as serial number that increases each time object is created.</p>
<p> If you liked the article please share it or add comments. </p>
<p>Happy Coding !!</p>
<div id="disqus_thread"></div>
<script>
var disqus_shortname = 'java-questions';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
</div>
<div class="col-sm-3 col-md-4">
<div style="margin: 5px; float: center;">  
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- new-righttop1 -->
<ins class="adsbygoogle"
style="display:inline-block;width:300px;height:600px"
data-ad-client="ca-pub-4267874373737812"
data-ad-slot="3435398011"></ins>
<script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
</div>
<div>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
style="display:inline-block;width:300px;height:600px"
data-ad-client="ca-pub-4267874373737812"
data-ad-slot="4912131216"></ins>
<script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
</div></div></div>
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-23729980-1', 'auto');
ga('send', 'pageview');
</script>
<footer style="background-color: #3c3d41;padding: 30px 30px;color: rgba(255,255,255,1.00);margin-bottom: 20px;border-bottom-right-radius: 6px;border-top-left-radius: 0px;border-bottom-left-radius: 6px;">
<div class="row">
<h4>Recommend Reading</h4>
<div class="col-md-6">
<ul class="pages">
<li><a href="java-memory-model-and-garbage-collections.html">How java manages Memory?</a></li>
<li><a href="java-hashcode-and-equals.html">Why is it advised to use hashcode and equals together?</a></li>
<li><a href="java-comparable-comparator.html">Comparable and Comparator in java</a></li>
<li><a href="java-singleton-class.html">How to create Singleton class in Java?</a></li>
<li><a href="difference-between-equals-method-and-equality-operator-java.html">Difference betwen equals and ==?</a></li>
<li><a href="difference-between-abstract-class-and-interface-java.html">When to use abstract class over interface?</a></li>
<li><a href="difference-between-final-finally-and-finalize.html">Difference between final, finally and finalize</a></li>
<li><a href="java-immutable-class.html">Why is it recommended to ues Immutable objects in Java</a></li>
</ul>
<p>Copyright 2018 JavaQuestions, All rights reserved | <a href="sitemap.xml">Sitemap</a></p>
</div>
<div class="col-md-5 animated fadeInRight">
<h3>Subscribe to get latest updates.</h3>
<form action="//java-questions.us5.list-manage.com/subscribe/post?u=eef8f08d0222ba841685ce4e2&amp;id=3670638f6d" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
<div id="mc_embed_signup_scroll">
<div class="mc-field-group">
<label for="mce-EMAIL">Email Address <span class="asterisk">*</span></label>
<input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL" style="color: rgba(0,0,0, 1.0);">
</div>
<div class="clear"><button type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="btn btn-success"/>Subscribe</div></div>
</form></div></p></div></div></footer></body></html>